# Decentralized Asset Management and Governance Smart Contract

This smart contract implements a decentralized system for managing and governing renewable energy assets. It provides robust functionality for asset registration, share purchase, revenue distribution, and governance through proposals and voting. The contract is designed with various constants, error handling, and modular data structures to ensure scalability, security, and ease of use.

---

## Features

1. **Asset Registration**:
   - Allows authorized users to register new renewable energy assets.
   - Tracks detailed metadata, including location, asset type, and financial metrics.

2. **Share Purchase**:
   - Facilitates the purchase of asset shares by investors.
   - Ensures sufficient shares are available and the asset is active before allowing transactions.

3. **Revenue Distribution**:
   - Distributes revenue generated by assets to shareholders.
   - Automatically updates asset and shareholder records.

4. **Governance**:
   - Supports proposal submission, voting, and execution.
   - Implements quorum, vote thresholds, and cooldown periods for governance processes.

5. **Data Insights**:
   - Provides real-time data on asset performance, ownership, and governance settings.

---

## Contract Components

### Constants and Configurations

- **Contract Owner**: The account that deploys the contract (`tx-sender`).
- **Minimum Investment**: Ensures a minimum investment of 1 STX.
- **Vote Threshold**: Requires 75% approval for proposals to pass.
- **Maintenance Window**: A 24-hour maintenance period defined as 144 blocks.

### Error Codes

The contract uses predefined error codes for predictable and structured error handling, such as:

- `ERR-NOT-AUTHORIZED (401)`: Unauthorized access.
- `ERR-ASSET-NOT-FOUND (404)`: Asset does not exist.
- `ERR-INVALID-AMOUNT (403)`: Invalid numerical input.

Refer to the contract source for the full list of error codes.

---

## Data Structures

### Asset Structure
Stores metadata for each asset, including:
- **Name**: Up to 50 ASCII characters.
- **Type**: One of `solar`, `wind`, `hydro`, or `biomass`.
- **Location**: Latitude and longitude coordinates.
- **Financial Metrics**: Total shares, available shares, share price, and revenue details.
- **Performance Metrics**: Operational hours, energy production, carbon offset, etc.

### Ownership Structure
Tracks share ownership and voting power for each asset.
- **Shares**: Number of shares owned by a principal.
- **Revenue Claimed**: Revenue already claimed by the owner.
- **Voting Power**: Derived from shares owned relative to total shares.

### Governance Settings
Defines the rules for proposal submissions and voting:
- **Minimum Quorum**: Percentage of voting power required for quorum.
- **Vote Period**: Duration for voting on proposals.
- **Cooldown Period**: Delay before implementing approved proposals.

### Proposals
Tracks submitted proposals for governance:
- **Proposal Type**: Type of governance action.
- **Description**: Up to 500 ASCII characters.
- **Status**: `active`, `approved`, or `rejected`.
- **Votes For/Against**: Tracks voting results.

---

## Key Functions

### Public Functions

#### Asset Management

1. **Register Asset**
   ```clojure
   (define-public (register-asset (name (string-ascii 50))
                                  (asset-type (string-ascii 20))
                                  (total-shares uint)
                                  (share-price uint)
                                  (latitude int)
                                  (longitude int))
   ```
   Registers a new asset with detailed metadata.

2. **Purchase Shares**
   ```clojure
   (define-public (purchase-shares (asset-id uint) (share-count uint))
   ```
   Allows users to buy shares in an asset.

#### Revenue Management

1. **Distribute Revenue**
   ```clojure
   (define-public (distribute-revenue (asset-id uint) (amount uint))
   ```
   Distributes asset-generated revenue among shareholders.

#### Governance

1. **Submit Proposal**
   ```clojure
   (define-public (submit-proposal (asset-id uint)
                                   (proposal-type (string-ascii 20))
                                   (description (string-ascii 500))
                                   (amount uint))
   ```
   Submits a proposal for governance decisions.

### Read-only Functions

1. **Get Asset Info**
   ```clojure
   (define-read-only (get-asset-info (asset-id uint))
   ```
   Retrieves metadata of a specific asset.

2. **Get Ownership Info**
   ```clojure
   (define-read-only (get-ownership-info (asset-id uint) (owner principal))
   ```
   Retrieves ownership details for an asset.

3. **Get Governance Settings**
   ```clojure
   (define-read-only (get-governance-settings (asset-id uint))
   ```
   Retrieves governance parameters for an asset.

4. **Get Proposal Info**
   ```clojure
   (define-read-only (get-proposal-info (asset-id uint) (proposal-id uint))
   ```
   Retrieves details of a submitted proposal.

---

## Usage Workflow

1. **Asset Registration**: The contract owner registers an asset.
2. **Investment**: Investors purchase shares of the asset.
3. **Revenue Generation**: The asset generates revenue, which is distributed to shareholders.
4. **Governance**: Shareholders submit and vote on proposals to manage the asset.
5. **Maintenance**: The asset undergoes periodic maintenance and updates.

---

## Security Considerations

1. **Authorization**: Critical functions are restricted to authorized users.
2. **Error Handling**: Comprehensive error codes ensure predictable failure modes.
3. **Quorum and Thresholds**: Prevents governance manipulation by enforcing minimum participation and voting requirements.
4. **Validation**: Ensures input data integrity through private helper functions.

---

## Future Enhancements

1. **Multi-Signature Support**: Extend governance to require multi-signature approvals.
2. **Automated Metrics**: Integration with IoT devices for real-time asset performance tracking.
3. **Dynamic Governance Rules**: Allow asset owners to modify governance parameters through proposals.

---

